<body class="formato-fondo fuente-letra">
    <div class="row mb-3">
        <div class="col-12 d-flex justify-content-between align-items-center">
            <h3>Seguimientos</h3>
            <app-boton-notificacion></app-boton-notificacion>
        </div>
    </div>
    <div class="row mb-3">
        <div class="col-12 d-flex justify-content-between align-items-center">
            <div class="button-group">
                <button class="btn col-auto bg-white rounded-4 text-center me-2 py-0" [ngClass]="{'active': activeFilter === '1'}" style="width: 150px;" (click)="applyFilter('1')">
                    <div class="row">
                        <div class="col">
                            Hoy
                        </div>
                    </div>
                    <div class="row">
                        <div class="col">
                            <h3 class="fw-bold mb-0">{{cntFiltros.hoy}}</h3>
                        </div>
                    </div>
                </button>
                <button class="btn col-auto rounded-4 text-center me-2 py-0" [ngClass]="{'active': activeFilter === '2'}" style="width: 150px;" (click)="applyFilter('2')">
                    <div class="row">
                        <div class="col">
                            Con alerta
                        </div>
                    </div>
                    <div class="row">
                        <div class="col">
                            <h3 class="fw-bold mb-0">{{cntFiltros.conAlerta}}</h3>
                        </div>
                    </div>
                </button>
                <button class="btn col-auto bg-white rounded-4 text-center me-2 py-0" [ngClass]="{'active': activeFilter === '3'}" style="width: 150px;" (click)="applyFilter('3')">
                    <div class="row">
                        <div class="col">
                            Todos
                        </div>
                    </div>
                    <div class="row">
                        <div class="col">
                            <h3 class="fw-bold mb-0">{{cntFiltros.todos}}</h3>
                        </div>
                    </div>
                </button>
                <button class="btn col-auto bg-white rounded-4 text-center me-2 py-0" [ngClass]="{'active': activeFilter === '4'}" style="width: 240px;" (click)="applyFilter('4')">
                    <div class="row">
                        <div class="col">
                            Solicitados por cuidador
                        </div>
                    </div>
                    <div class="row">
                        <div class="col">
                            <h3 class="fw-bold mb-0">{{cntFiltros.solicitadosPorCuidador}}</h3>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>
    
    <div class="row">
        <div class="col-12">
            <p-card>
                <p-table [value]="seguimientos" [paginator]="true" [rows]="10" [responsive]="true">
                    <ng-template pTemplate="header">
                        <tr>
                            <th class="header-th" [width]="100">No. Caso</th>
                            <th class="header-th" [width]="120">Fecha Notificación</th>
                            <th class="header-th">Nombre</th>
                            <th class="header-th" [width]="200">Estado</th>
                            <th class="header-th">Asunto Última Actuación</th>
                            <th class="header-th" [width]="120">Última Actuación</th>
                            <th class="header-th" [width]="100">Alertas</th>
                            <th class="header-th" [width]="100">Acción</th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-seguimiento>
                        <tr>
                            <td><a [routerLink]="['/gestion/detalle_seguimiento', seguimiento.noCaso]">{{ seguimiento.noCaso }}</a></td>
                            <td>{{ seguimiento.fechaNotificacion | date:'dd/MM/yyyy' }}</td>
                            <td>{{ seguimiento.nombreCompleto }}</td>
                            <td><span class="badge w-100" [ngStyle]="{'background-color': seguimiento.estado.colorBG, 'color': seguimiento.estado.colorText}">{{ seguimiento.estado.nombre }}</span></td>
                            <td>{{ seguimiento.asuntoUltimaActuacion }}</td>
                            <td>{{ seguimiento.fechaUltimaActuacion | date:'dd/MM/yyyy' }}</td>
                            <td>
                                <span *ngFor="let alerta of seguimiento.alertas" [ngClass]="getBadgeColor(alerta.id)" class="badge text-white me-1">
                                {{ alerta.nombre }}
                                </span>
                            </td>
                            <td>
                                <i class="bi bi-telephone-outbound-fill me-2" style="color: #73b7ad;"></i>
                                <i class="bi bi-eye-fill" style="color: #73b7ad;"></i>
                            </td>
                        </tr>
                    </ng-template>
                </p-table>
            </p-card>
        </div>
    </div>    
</body>